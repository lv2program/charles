<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Donation Feed</title>
  <link rel="stylesheet" href="donation-feed.css">
</head>
<body>
<div class="carousel">
  <div class="card-container">
    <div class="card">
      <div class="card-top">
      <h2 class="card-title"></h2>
      <p class="card-description"></p>
      <p class="card-short-description"></p>
      </div>
      <img class="card-image" src="" alt="">
      <button type="button" class="donate-button" data-campaign-id=""></button>
    </div>
  </div>
</div>
</body>
  <script>

    function handleResponse(data) {
      console.log("handle response called");
      const cardContainer = document.querySelector('.card-container');
      const cardTemplate = document.querySelector('.card');
      const clonedNode = cardTemplate.cloneNode(true);

      data.forEach(element => {
        const newCard = clonedNode.cloneNode(true);
        campaign = element.content;
        const campaignId = element.id;
        newCard.querySelector('.card-title').textContent = campaign.title;
        newCard.querySelector('.card-description').textContent = campaign.description[0].insert;
        newCard.querySelector('.card-short-description').textContent = campaign.shortDescription;
        newCard.querySelector('.card-image').src = campaign.detail.image.url;
        newCard.querySelector('.card-image').alt = campaign.detail.image.altText;

        const donateButton = newCard.querySelector('.donate-button');
        donateButton.setAttribute('data-campaign-id', campaignId);
        donateButton.textContent = "Donate";
        donateButton.textContent = campaign.detail.callToActionText || "Donate";
        donateButton.addEventListener('click', () => {
          const campaignId = donateButton.getAttribute('data-campaign-id');
          const destinationUrl = `https://secure.myvanco.com/L-ZFJ1/campaign/${campaignId}`;
          window.open(destinationUrl, '_blank');
        });

        cardContainer.appendChild(newCard);
      });
      cardContainer.removeChild(cardTemplate);

      const listOfCardElements = document.querySelectorAll('.card');

      listOfCardElements.forEach((cardElement, index) => {
        cardElement.addEventListener('click', () => {
          const cardWidth = cardElement.offsetWidth;
          const cardContainerWidth = cardContainer.offsetWidth;
          const scrollLeft = index * cardWidth - (cardContainerWidth / 2) + (cardWidth / 2);
          cardContainer.scrollTo({left: scrollLeft, behavior: 'smooth'});
        });
      });

    }

    function fetchCampaigns() {
      // const script = document.createElement('campaign-script');
      // script.src = 'https://payerapi.myvanco.com/api/campaigns?location=L-ZFJ1&callback=handleResponse';
      // document.body.appendChild(script);
      // fetch('file:///campaign-feed.json')
      // .then(response => response.json())
      // .then(data => handleResponse(data))
      // .catch(error => console.error('Error:', error));
      handleResponse(campaigns)
    }

    window.onload = fetchCampaigns;

    const campaigns =
        [
            {
              "id": "C-13YPP",
              "content": {
                "title": "Offertory",
                "description": [{"insert":"General donations in support of all church programs."}],
                "shortDescription": "General donation; you can specify an unlisted category/cause in the notes here.",
                "detail": {
                  "callToActionText": "Donate",
                  "donationOptionsTitle": "Donate",
                  "image": {
                    "id": "6D0MXFXT",
                    "url": "https://donprodprd1pubstor01.blob.core.windows.net/unsplashimages/campaigns/13YPP/6D0MXFXT.jpg",
                    "altText": "long long 10 char string"
                  }
                }
              }
            },
            {
              "id": "C-13YPQ",
              "content": {
                "title": "Mother Teresa Social Ministry",
                "description": [{"insert":"Supports vouchers for ID Cards and Birth Certificates; Sandwich Line."}],
                "shortDescription": "Supports vouchers for ID Cards and Birth Certificates; Sandwich Line.",
                "detail": {
                  "callToActionText": "Donate",
                  "donationOptionsTitle": "Donate",
                  "image": {
                    "id": "64KFPPD9",
                    "url": "https://donprodprd1pubstor01.blob.core.windows.net/unsplashimages/campaigns/13YPQ/64KFPPD9.jpg",
                    "altText": "long long 10 char string"
                  }
                }
              }
            },
            {
              "id": "C-14STW",
              "content": {
                "title": "Dinner",
                "description": [{"insert":"Spaghetti Dinner April 20, 2024. $15 for adults; children under 5 free."}],
                "shortDescription": "Spaghetti Dinner April 20, 2024. $15 for adults; children under 5 free.",
                "detail": {
                  "callToActionText": "Join us",
                  "donationOptionsTitle": "Join us",
                  "image": {
                    "id": "5TR3SDTE",
                    "url": "https://donprodprd1pubstor01.blob.core.windows.net/unsplashimages/campaigns/14STW/5TR3SDTE.jpg",
                    "altText": "long long 10 char string"
                  }
                }
              }
            },
            {
              "id": "C-13YPH",
              "content": {
                "title": "Wedding Offering",
                "description": [{"insert":"Provide for the church's expenses for your marriage preparation and wedding ceremony."}],
                "shortDescription": "Wedding deposits and balances",
                "detail": {
                  "callToActionText": "Donate",
                  "donationOptionsTitle": "Donate",
                  "image": {
                    "id": "6E1BG2S6",
                    "url": "https://donprodprd1pubstor01.blob.core.windows.net/unsplashimages/campaigns/13YPH/6E1BG2S6.jpg",
                    "altText": "long long 10 char string"
                  }
                }
              }
            },
            {
              "id": "C-13YPR",
              "content": {
                "title": "Music",
                "description": [{"insert":"Provide for our musicians and their equipment so that we can praise the Lord in song! This includes the maintenance of the organ and pianos, as well as sheet music."}],
                "shortDescription": "For our musicians and their instruments and sheet music.",
                "detail": {
                  "callToActionText": "Donate",
                  "donationOptionsTitle": "Donate",
                  "image": {
                    "id": "64HVWTY5",
                    "url": "https://donprodprd1pubstor01.blob.core.windows.net/unsplashimages/campaigns/13YPR/64HVWTY5.jpg",
                    "altText": "long long 10 char string"
                  }
                }
              }
            },
            {
              "id": "C-14FHV",
              "content": {
                "title": "Candles",
                "description": [{"insert":"People choose to light votive candles for many reasons, all symbolizing their prayers for a living or deceased person, sometimes through the intercession of a particular saint."}],
                "shortDescription": "Make an offering when you light a candle in church or purchase one to take home.",
                "detail": {
                  "callToActionText": "Donate",
                  "donationOptionsTitle": "Donate",
                  "image": {
                    "id": "90VAWCMV",
                    "url": "https://donprodprd1pubstor01.blob.core.windows.net/unsplashimages/campaigns/14FHV/90VAWCMV.jpg",
                    "altText": "long long 10 char string"
                  }
                }
              }
            },
            {
              "id": "C-14FE1",
              "content": {
                "title": "Mass Requests",
                "description": [{"insert":"When you request a Mass to be celebrated for a living or deceased person, you invite the whole church, and those attending that specific Mass, to pray for that person, and unite their prayers to the Holy Sacrifice of the Mass. This is a priceless gift!We must be clear that no offering need be made, monetary or otherwise, at this time. Nevertheless, it is fitting that something be given to the church and the priest celebrating the Mass you requested. The standard offering throughout the United States is $10."}],
                "shortDescription": "Your donation at the time you request a Mass to be said for your intentions.",
                "detail": {
                  "callToActionText": "Donate",
                  "donationOptionsTitle": "Donate",
                  "image": {
                    "id": "8560BXZY",
                    "url": "https://donprodprd1pubstor01.blob.core.windows.net/unsplashimages/campaigns/14FE1/8560BXZY.jpg",
                    "altText": "long long 10 char string"
                  }
                }
              }
            },
            {
              "id": "C-13YPK",
              "content": {
                "title": "Oblates of the Virgin Mary",
                "description": [{"insert":"Provide for the needs of the priests and seminarians of the Oblates of the Virgin Mary (OMV) who have served at Holy Ghost since 2001. The OMVs at Holy Ghost are assigned by the Provincial Rector of the St. Ignatius Province of the OMV, based in Boston, MA."}],
                "shortDescription": "Support our Oblates, who have served here since 2001",
                "detail": {
                  "callToActionText": "Donate",
                  "donationOptionsTitle": "Donate",
                  "image": {
                    "id": "64HZS37Q",
                    "url": "https://donprodprd1pubstor01.blob.core.windows.net/unsplashimages/campaigns/13YPK/64HZS37Q.jpg",
                    "altText": "long long 10 char string"
                  }
                }
              }
            },
            {
              "id": "C-13YPM",
              "content": {
                "title": "Restoration and Repair",
                "description": [{"insert":"From time to time, we have significant projects to maintain the longevity of the functionality and beauty of our church and facility. Donations to this category support these periodic, major projects."}],
                "shortDescription": "Help keep our church beautiful and functional for decades to come!",
                "detail": {
                  "callToActionText": "Donate",
                  "donationOptionsTitle": "Donate",
                  "image": {
                    "id": "64KHHXHX",
                    "url": "https://donprodprd1pubstor01.blob.core.windows.net/unsplashimages/campaigns/13YPM/64KHHXHX.jpg",
                    "altText": "long long 10 char string"
                  }
                }
              }
            },
            {
              "id": "C-13YPS",
              "content": {
                "title": "Maintenance Fund",
                "description": [{"insert":"Assist with financing the maintenance of the church, parish hall and rectory."}],
                "shortDescription": "Help maintain our church, hall and rectory.",
                "detail": {
                  "callToActionText": "Donate",
                  "donationOptionsTitle": "Donate",
                  "image": {
                    "id": "855WD5TQ",
                    "url": "https://donprodprd1pubstor01.blob.core.windows.net/unsplashimages/campaigns/13YPS/855WD5TQ.jpg",
                    "altText": "long long 10 char string"
                  }
                }
              }
            },
            {
              "id": "C-14FHW",
              "content": {
                "title": "Respect Life",
                "description": [{"insert":"Donations in support of Respect Life activities, including the Life Around the World dinner."}],
                "shortDescription": "Support the defense of all human life!",
                "detail": {
                  "callToActionText": "Donate",
                  "donationOptionsTitle": "Donate",
                  "image": {
                    "id": "90WNZ9EN",
                    "url": "https://donprodprd1pubstor01.blob.core.windows.net/unsplashimages/campaigns/14FHW/90WNZ9EN.jpg",
                    "altText": "long long 10 char string"
                  }
                }
              }
            },
            {
              "id": "C-13YPG",
              "content": {
                "title": "Catholic Faith Camp (LAST NAME)",
                "description": [{"insert":"CFC is our spin on Vacation Bible School, and includes skits, lessons, crafts, and Mass with opportunities for Confession and Eucharistic Adoration. 2024 dates: August 5-9."}],
                "shortDescription": "5 Days of faith-filled activities and crafts August 5-9, 2024",
                "detail": {
                  "callToActionText": "Donate",
                  "donationOptionsTitle": "Donate",
                  "image": {
                    "id": "6D0FCJFT",
                    "url": "https://donprodprd1pubstor01.blob.core.windows.net/unsplashimages/campaigns/13YPG/6D0FCJFT.jpg",
                    "altText": "long long 10 char string"
                  }
                }
              }
            }
          ];

  </script>

</html>